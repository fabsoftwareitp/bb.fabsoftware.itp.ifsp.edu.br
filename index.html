<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BB</title>

    <link rel="stylesheet" href="style.css">
    <script src="script.js"> </script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
    <script src="ranking.js"> </script>
</head>

<body>

        <div class="barra1"></div>
        <canvas id="board"></canvas>
        <div class="barra2"></div>

    <div class="telaInicial">
        <h1>Brick Breaker</h1> 
        
        <div class="container" id="form">
            <p>Informe um Nome</p>
            <input type="text" id="name" placeholder="Nome">
            <button id="start" onclick="startGame()">Jogar</button>
          </div>

          <div class="rodape">
            <p id="p1">Desenvolvido por</p>
            <p>FÃ¡brica de Software</p>
            <img src="img/logo-oficial.png" alt="">
        </div>
    </div>

    <div class="telaDerrota">
        <h1>Brick Breaker</h1>

        <div class="container">
            <p>Voce Perdeu!</p>
            <p id="pontos"></p>
            <button onclick="jogarNovamente()">Jogar Novamente</button>
        </div>

        <ul class="rankingList" class="ranking_container">
            <h2>Ranking:</h2>
        </ul>
    </div>

    <div class="telaVitoria">
        <h1>Brick Breaker</h1>

        <div class="container">
            <p>Voce Venceu!</p>
            <p id="pontos"></p>
            <button onclick="jogarNovamente()">Jogar Novamente</button>
        </div>

        <ul class="rankingList" class="ranking_container">
            <h2>Ranking:</h2>
        </ul>

    </div>

    <audio id="blocoQuebradoAudio" src="/sons/tijoloCerto.wav"></audio>

    <div class="niveis">
        <p id="indicadorNivel"></p>
    </div>

</body>
<script>
    const rankingList = document.querySelectorAll(".rankingList");
const host = "https://ranking.fabsoftware.itp.ifsp.edu.br/ranking/bb"

rankingList.addEventListener('click', ()=> {
    console.log("adsadsa");
})

fetch(`${host}`)
  .then(res => res.json())
  .then(res =>  createRankingList(res));

async function createRankingList(rankingJson) {
  let aux = 0;
  console.log(rankingJson);
  rankingJson.sort(function(a, b){return b.score - a.score});
  console.log(rankingJson);
  await rankingJson.forEach(player => {
    const item = createPlayerElement(player);
    rankingList.appendChild(item);
  });
}

function createPlayerElement(player) {
  const element = document.createElement('li');
  element.innerHTML = `<span>${player.name}</span>: <span class="player-score">${player.score}</span>`;
  return element;
}
</script>
</html>